---
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { formatDate } from "@/lib/utils";

interface Props {
  title: string;
  description: string;
  pubDate: Date;
  tags?: string[];
  href: string;
}

const { title, description, pubDate, tags = [], href } = Astro.props;
---

<a href={href} class="block group">
  <Card className="h-full transition-all hover:shadow-md hover:border-primary/50">
    <CardHeader>
      <div class="flex items-center justify-between text-sm text-muted-foreground mb-2">
        <time datetime={pubDate.toISOString()}>{formatDate(pubDate)}</time>
      </div>
      <CardTitle className="group-hover:text-primary transition-colors line-clamp-2">
        {title}
      </CardTitle>
    </CardHeader>
    <CardContent>
      <p class="text-muted-foreground line-clamp-2 mb-4">{description}</p>
      {
        tags.length > 0 && (
          <div class="flex flex-wrap gap-1">
            {tags.slice(0, 3).map((tag) => (
              <Badge variant="secondary" className="text-xs">
                {tag}
              </Badge>
            ))}
            {tags.length > 3 && (
              <Badge variant="outline" className="text-xs">
                +{tags.length - 3}
              </Badge>
            )}
          </div>
        )
      }
    </CardContent>
  </Card>
</a>
